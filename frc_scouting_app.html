<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FRC 2026 REBUILT Scouting</title>
    <script src="frc_scouting_app.js"></script>
    <style>
        :root {
            --primary: #0066cc;
            --primary-dark: #004a99;
            --success: #00a854;
            --danger: #e60000;
            --warning: #ff9500;
            --bg-dark: #1a1a1a;
            --bg-card: #2a2a2a;
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
            --border: #404040;
            --shadow: rgba(0, 0, 0, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #0d0d0d 100%);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 1rem;
            -webkit-user-select: none;
            user-select: none;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: var(--bg-card);
            border-radius: 12px;
            border: 2px solid var(--primary);
            box-shadow: 0 4px 20px var(--shadow);
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: 2px;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #0066cc, #00ccff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .match-info {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .info-input {
            display: flex;
            flex-direction: column;
        }

        .info-input label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .info-input input {
            padding: 0.75rem;
            font-size: 1.125rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            background: var(--bg-card);
            color: var(--text-primary);
            font-weight: 600;
            transition: all 0.2s;
        }

        .info-input input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.2);
        }

        .section {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 2px solid var(--border);
            box-shadow: 0 4px 15px var(--shadow);
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--primary);
        }

        .auto-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .auto-item {
            display: flex;
            flex-direction: column;
        }

        .auto-item label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .checkbox-wrapper {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem;
            background: var(--bg-dark);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .checkbox-wrapper:hover {
            border-color: var(--primary);
        }

        .checkbox-wrapper.checked {
            background: rgba(0, 102, 204, 0.2);
            border-color: var(--primary);
        }

        .checkbox-wrapper input[type="checkbox"] {
            width: 24px;
            height: 24px;
            cursor: pointer;
            accent-color: var(--primary);
        }

        .checkbox-wrapper span {
            font-weight: 600;
            font-size: 1rem;
        }

        .score-display {
            font-size: 3rem;
            font-weight: 900;
            text-align: center;
            padding: 1.5rem;
            background: linear-gradient(135deg, var(--bg-dark), #000);
            border-radius: 12px;
            margin-bottom: 1rem;
            border: 3px solid var(--primary);
            color: #00ccff;
            text-shadow: 0 0 20px rgba(0, 204, 255, 0.5);
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .score-btn {
            padding: 1.5rem;
            font-size: 1.5rem;
            font-weight: 900;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.15s;
            box-shadow: 0 4px 10px var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .score-btn:active {
            transform: scale(0.95);
        }

        .score-btn.plus {
            background: linear-gradient(135deg, #00a854, #00d968);
            color: white;
        }

        .score-btn.plus:hover {
            background: linear-gradient(135deg, #00d968, #00ff88);
        }

        .score-btn.minus {
            background: linear-gradient(135deg, #cc0000, #ff3333);
            color: white;
        }

        .score-btn.minus:hover {
            background: linear-gradient(135deg, #ff3333, #ff6666);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pulse {
            animation: pulse 0.3s ease-in-out;
        }

        .climb-selector {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.75rem;
        }

        .climb-btn {
            padding: 1.25rem;
            font-size: 1.125rem;
            font-weight: 700;
            border: 2px solid var(--border);
            border-radius: 10px;
            background: var(--bg-dark);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .climb-btn:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .climb-btn.selected {
            background: linear-gradient(135deg, var(--primary), #0088ff);
            border-color: var(--primary);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 102, 204, 0.4);
        }

        .outcome-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
        }

        .outcome-btn {
            padding: 1.25rem;
            font-size: 1.25rem;
            font-weight: 900;
            border: 2px solid var(--border);
            border-radius: 10px;
            background: var(--bg-dark);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .outcome-btn:hover {
            transform: translateY(-2px);
        }

        .outcome-btn.selected {
            box-shadow: 0 4px 15px var(--shadow);
        }

        #wonBtn.selected {
            background: linear-gradient(135deg, #00a854, #00d968);
            border-color: var(--success);
            color: white;
        }

        #lostBtn.selected {
            background: linear-gradient(135deg, #cc0000, #ff3333);
            border-color: var(--danger);
            color: white;
        }

        #tiedBtn.selected {
            background: linear-gradient(135deg, #ff9500, #ffb84d);
            border-color: var(--warning);
            color: white;
        }

        .notes-area {
            width: 100%;
            min-height: 120px;
            padding: 1rem;
            font-size: 1rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            background: var(--bg-dark);
            color: var(--text-primary);
            font-family: inherit;
            resize: vertical;
            transition: all 0.2s;
        }

        .notes-area:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.2);
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 1rem;
        }

        .action-btn {
            padding: 1.5rem;
            font-size: 1.25rem;
            font-weight: 900;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .reset-btn {
            background: linear-gradient(135deg, #666666, #888888);
            color: white;
        }

        .reset-btn:hover {
            background: linear-gradient(135deg, #888888, #999999);
            transform: translateY(-2px);
        }

        .submit-btn {
            background: linear-gradient(135deg, var(--primary), #0088ff);
            color: white;
            box-shadow: 0 4px 20px rgba(0, 102, 204, 0.4);
        }

        .submit-btn:hover {
            background: linear-gradient(135deg, #0088ff, #00aaff);
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(0, 102, 204, 0.6);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            border: 3px solid var(--primary);
            box-shadow: 0 10px 40px var(--shadow);
            text-align: center;
        }

        .modal-title {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }

        #qrcode {
            display: flex;
            justify-content: center;
            margin: 2rem 0;
            padding: 1rem;
            background: white;
            border-radius: 8px;
        }

        .data-summary {
            text-align: left;
            background: var(--bg-dark);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            max-height: 300px;
            overflow-y: auto;
        }

        .close-btn {
            margin-top: 1.5rem;
            padding: 1rem 2rem;
            font-size: 1.125rem;
            font-weight: 700;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .match-info {
                grid-template-columns: 1fr;
            }

            .button-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .climb-selector {
                grid-template-columns: repeat(2, 1fr);
            }

            .outcome-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ FRC 2026 REBUILT</h1>
            <p style="color: var(--text-secondary); font-weight: 600;">Scouting System</p>
        </div>

        <!-- Match Information -->
        <div class="section">
            <div class="section-title">Match Information</div>
            <div class="match-info">
                <div class="info-input">
                    <label>Match #</label>
                    <input type="number" id="matchNumber" placeholder="1" min="1" required>
                </div>
                <div class="info-input">
                    <label>Team #</label>
                    <input type="number" id="teamNumber" placeholder="1234" min="1" required>
                </div>
                <div class="info-input">
                    <label>Scout Name</label>
                    <input type="text" id="scoutName" placeholder="Your Name" required>
                </div>
            </div>
        </div>

        <!-- Autonomous Section -->
        <div class="section">
            <div class="section-title">‚ö° Autonomous</div>
            
            <!-- Auto Balls Score Display -->
            <div class="score-display" id="autoScore" style="font-size: 2rem; padding: 1rem;">0</div>
            
            <!-- Auto Scoring Buttons -->
            <div class="button-grid" style="margin-bottom: 1rem;">
                <button class="score-btn plus" onclick="adjustAutoScore(1)">+1</button>
                <button class="score-btn plus" onclick="adjustAutoScore(2)">+2</button>
                <button class="score-btn plus" onclick="adjustAutoScore(3)">+3</button>
                <button class="score-btn plus" onclick="adjustAutoScore(5)">+5</button>
                <button class="score-btn minus" onclick="adjustAutoScore(-1)">-1</button>
                <button class="score-btn minus" onclick="adjustAutoScore(-2)">-2</button>
            </div>
            
            <!-- Auto Climb Selection -->
            <div class="auto-item" style="margin-top: 1rem;">
                <label style="font-size: 0.875rem; color: #b3b3b3; margin-bottom: 0.5rem; display: block;">Autonomous Climb</label>
                <div class="climb-selector">
                    <button class="climb-btn selected" onclick="selectAutoClimb('None')">None</button>
                    <button class="climb-btn" onclick="selectAutoClimb('Level 1')">Level 1</button>
                    <button class="climb-btn" onclick="selectAutoClimb('Level 2')">Level 2</button>
                    <button class="climb-btn" onclick="selectAutoClimb('Level 3')">Level 3</button>
                </div>
            </div>
        </div>

        <!-- Teleop Section -->
        <div class="section">
            <div class="section-title">üéÆ Teleop Scoring</div>
            <div class="score-display" id="teleopScore">0</div>
            <div class="button-grid">
                <button class="score-btn plus" onclick="adjustScore(1)">+1</button>
                <button class="score-btn plus" onclick="adjustScore(3)">+3</button>
                <button class="score-btn plus" onclick="adjustScore(5)">+5</button>
                <button class="score-btn plus" onclick="adjustScore(7)">+7</button>
                <button class="score-btn minus" onclick="adjustScore(-1)">-1</button>
                <button class="score-btn minus" onclick="adjustScore(-3)">-3</button>
            </div>
        </div>

        <!-- Endgame Section -->
        <div class="section">
            <div class="section-title">üéØ Endgame</div>
            <label style="font-size: 0.875rem; color: #b3b3b3; margin-bottom: 0.75rem; display: block;">Endgame Climb Level</label>
            <div class="climb-selector">
                <button class="climb-btn selected" id="climbNone" onclick="selectClimb('None')">None</button>
                <button class="climb-btn" id="climb1" onclick="selectClimb('Level 1')">Level 1</button>
                <button class="climb-btn" id="climb2" onclick="selectClimb('Level 2')">Level 2</button>
                <button class="climb-btn" id="climb3" onclick="selectClimb('Level 3')">Level 3</button>
            </div>
        </div>

        <!-- Match Outcome -->
        <div class="section">
            <div class="section-title">üìä Match Outcome</div>
            <div class="outcome-buttons">
                <button class="outcome-btn" id="wonBtn" onclick="selectOutcome('Won')">‚úÖ Won</button>
                <button class="outcome-btn" id="lostBtn" onclick="selectOutcome('Lost')">‚ùå Lost</button>
                <button class="outcome-btn" id="tiedBtn" onclick="selectOutcome('Tied')">‚öñÔ∏è Tied</button>
            </div>
        </div>

        <!-- Robot Status -->
        <div class="section">
            <div class="section-title">ü§ñ Robot Status</div>
            <div class="auto-grid">
                <div class="auto-item">
                    <label>Played Defense</label>
                    <div class="checkbox-wrapper" id="defenseWrapper">
                        <input type="checkbox" id="playedDefense">
                        <span>Yes</span>
                    </div>
                </div>
                <div class="auto-item">
                    <label>Robot Broke</label>
                    <div class="checkbox-wrapper" id="brokeWrapper">
                        <input type="checkbox" id="robotBroke">
                        <span>Yes</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Section -->
        <div class="section">
            <div class="section-title">üìù Notes & Penalties</div>
            <textarea class="notes-area" id="notes" placeholder="Record penalties, fouls, defensive plays, robot issues, or other observations..."></textarea>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="action-btn reset-btn" onclick="resetForm()">Reset</button>
            <button class="action-btn submit-btn" onclick="generateQR()">Generate QR</button>
        </div>
    </div>

    <!-- QR Code Modal -->
    <div class="modal" id="qrModal">
        <div class="modal-content">
            <div class="modal-title">Match Data QR Code</div>
            <div id="qrcode"></div>
            <div class="data-summary" id="dataSummary"></div>
            <button class="close-btn" onclick="closeModal()">Close & New Match</button>
        </div>
    </div>

    <script>
        // State management
        let teleopScore = 0;
        let autoScore = 0;
        let selectedAutoClimb = 'None';
        let selectedEndgameClimb = 'None';
        let matchOutcome = 'Unknown';

        // Initialize checkbox wrappers
        document.getElementById('defenseWrapper').addEventListener('click', function() {
            const checkbox = document.getElementById('playedDefense');
            checkbox.checked = !checkbox.checked;
            this.classList.toggle('checked', checkbox.checked);
        });

        document.getElementById('brokeWrapper').addEventListener('click', function() {
            const checkbox = document.getElementById('robotBroke');
            checkbox.checked = !checkbox.checked;
            this.classList.toggle('checked', checkbox.checked);
        });

        // Autonomous scoring
        function adjustAutoScore(value) {
            autoScore = Math.max(0, autoScore + value);
            const scoreDisplay = document.getElementById('autoScore');
            scoreDisplay.textContent = autoScore;
            scoreDisplay.classList.add('pulse');
            setTimeout(() => scoreDisplay.classList.remove('pulse'), 300);
        }

        // Teleop scoring
        function adjustScore(value) {
            teleopScore = Math.max(0, teleopScore + value);
            const scoreDisplay = document.getElementById('teleopScore');
            scoreDisplay.textContent = teleopScore;
            scoreDisplay.classList.add('pulse');
            setTimeout(() => scoreDisplay.classList.remove('pulse'), 300);
        }

        // Auto climb selection
        function selectAutoClimb(level) {
            selectedAutoClimb = level;
            document.querySelectorAll('.climb-selector')[0].querySelectorAll('.climb-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
        }

        // Endgame climb selection
        function selectClimb(level) {
            selectedEndgameClimb = level;
            document.querySelectorAll('.climb-selector')[1].querySelectorAll('.climb-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
        }

        // Match outcome selection
        function selectOutcome(outcome) {
            matchOutcome = outcome;
            document.querySelectorAll('#wonBtn, #lostBtn, #tiedBtn').forEach(btn => {
                btn.classList.remove('selected');
            });
            event.target.classList.add('selected');
        }

        // Generate QR Code
        function generateQR() {
            // Validate required fields
            const matchNumber = document.getElementById('matchNumber').value;
            const teamNumber = document.getElementById('teamNumber').value;
            const scoutName = document.getElementById('scoutName').value;

            if (!matchNumber || !teamNumber || !scoutName) {
                alert('Please fill in Match #, Team #, and Scout Name');
                return;
            }

            // Collect all data
            const scoutingData = {
                matchNumber: parseInt(matchNumber),
                teamNumber: parseInt(teamNumber),
                scoutName: scoutName,
                timestamp: new Date().toISOString(),
                autonomous: {
                    ballsScored: autoScore,
                    climbLevel: selectedAutoClimb
                },
                teleop: {
                    ballsScored: teleopScore
                },
                endgame: {
                    climbLevel: selectedEndgameClimb
                },
                matchOutcome: matchOutcome,
                robotStatus: {
                    playedDefense: document.getElementById('playedDefense').checked,
                    robotBroke: document.getElementById('robotBroke').checked
                },
                notes: document.getElementById('notes').value.trim()
            };

            // Convert to JSON string
            const dataString = JSON.stringify(scoutingData);

            // Clear previous QR code
            const qrContainer = document.getElementById('qrcode');
            qrContainer.innerHTML = '';

            // Generate new QR code
            new QRCode(qrContainer, {
                text: dataString,
                width: 256,
                height: 256,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });

            // Display data summary
            const summary = document.getElementById('dataSummary');
            summary.innerHTML = `
                <strong>Match:</strong> ${scoutingData.matchNumber} | <strong>Team:</strong> ${scoutingData.teamNumber}<br>
                <strong>Scout:</strong> ${scoutingData.scoutName}<br>
                <strong>Outcome:</strong> ${scoutingData.matchOutcome}<br>
                <strong>Auto Balls:</strong> ${scoutingData.autonomous.ballsScored} | <strong>Auto Climb:</strong> ${scoutingData.autonomous.climbLevel}<br>
                <strong>Teleop Balls:</strong> ${scoutingData.teleop.ballsScored}<br>
                <strong>Endgame Climb:</strong> ${scoutingData.endgame.climbLevel}<br>
                <strong>Played Defense:</strong> ${scoutingData.robotStatus.playedDefense ? 'Yes' : 'No'} | <strong>Robot Broke:</strong> ${scoutingData.robotStatus.robotBroke ? 'Yes' : 'No'}<br>
                <strong>Notes:</strong> ${scoutingData.notes || 'None'}<br><br>
                <strong>Data Length:</strong> ${dataString.length} characters
            `;

            // Show modal
            document.getElementById('qrModal').classList.add('active');
        }

        // Close modal and reset form
        function closeModal() {
            document.getElementById('qrModal').classList.remove('active');
            resetForm();
        }

        // Reset form
        function resetForm() {
            if (confirm('Are you sure you want to reset all data for this match?')) {
                document.getElementById('matchNumber').value = '';
                document.getElementById('teamNumber').value = '';
                document.getElementById('scoutName').value = '';
                
                autoScore = 0;
                document.getElementById('autoScore').textContent = '0';
                
                selectedAutoClimb = 'None';
                document.querySelectorAll('.climb-selector')[0].querySelectorAll('.climb-btn').forEach((btn, idx) => {
                    btn.classList.toggle('selected', idx === 0);
                });
                
                teleopScore = 0;
                document.getElementById('teleopScore').textContent = '0';
                
                selectedEndgameClimb = 'None';
                document.querySelectorAll('.climb-selector')[1].querySelectorAll('.climb-btn').forEach((btn, idx) => {
                    btn.classList.toggle('selected', idx === 0);
                });
                
                matchOutcome = 'Unknown';
                document.querySelectorAll('#wonBtn, #lostBtn, #tiedBtn').forEach(btn => {
                    btn.classList.remove('selected');
                });
                
                document.getElementById('playedDefense').checked = false;
                document.getElementById('defenseWrapper').classList.remove('checked');
                document.getElementById('robotBroke').checked = false;
                document.getElementById('brokeWrapper').classList.remove('checked');
                document.getElementById('notes').value = '';
            }
        }

        // Keyboard shortcuts for power users
        document.addEventListener('keydown', function(e) {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
            
            // Teleop shortcuts
            switch(e.key) {
                case '1': adjustScore(1); break;
                case '3': adjustScore(3); break;
                case '5': adjustScore(5); break;
                case '7': adjustScore(7); break;
                case 'q': adjustScore(-1); break;
                case 'w': adjustScore(-3); break;
            }
            
            // Auto shortcuts (shift + number)
            if (e.shiftKey) {
                switch(e.key) {
                    case '!': adjustAutoScore(1); break; // Shift+1
                    case '@': adjustAutoScore(2); break; // Shift+2
                    case '#': adjustAutoScore(3); break; // Shift+3
                    case '%': adjustAutoScore(5); break; // Shift+5
                    case 'Q': adjustAutoScore(-1); break; // Shift+Q
                    case 'W': adjustAutoScore(-2); break; // Shift+W
                }
            }
        });
    </script>
</body>
</html>
